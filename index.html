<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Subscribers</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" href="./images/lanakilaLogo.png"> <!-- For tab icon -->
	<link rel="stylesheet" type="text/css" href="./client/animations.css">
	<link rel="stylesheet" type="text/css" href="./client/styles.css">
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato|Noto+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<script>
		window.onbeforeunload = function() {
		  if(showSave) {
		  	console.log("don't leave")
		  	alert("Are you sure you want to leave? There are still unsaved changes, please click the save button in the subscriber's group organizer tab to ensure all modified subscribers are saved in the specified groups");

		  	return "Are you sure you want to leave? There are still unsaved changes, please click the save button in the subscriber's group organizer tab to ensure all modified subscribers are saved in the specified groups";

		  }
		};
	</script>
</head>
<body>

	<div id="container">
		<div id="sideBar">
			<div id="login">
				<img id="logo" src="./images/lanakilaLogo.png">
				<div id="username">Lanakila</div>
			</div>

			<div id="optionsGroup">
				<div onclick="switchWorkspace(this);" class="option broadcast">BROADCAST</div>
				<div onclick="switchWorkspace(this);" class="option groups">GROUPS</div>
				<div onclick="switchWorkspace(this);" class="option subscribers">SUBSCRIBERS</div>
				<div onclick="switchWorkspace(this);" class="option messages">MESSAGES</div>
				<div onclick="switchWorkspace(this);" class="option quickSend">QUICK SEND</div>
			</div>
			
		</div>

		<div id="workspace">
			<div id="addMsgPopup">
						<div id="msgPopupBox">
							<div id="closeMsgPopup">&times;</div>
							<div id="msgPopupTitle">Message:</div>
							<textarea rows="10" id="typeMsg" placeholder="Type message here"></textarea>
							<span id = "addMsgWarning"></span>
							<div id="createMsg">
								Create Message
							</div>
						</div>
					</div>
			<!--BROADCAST-->
			<div class="" id="broadcast"><!--default screen on load-->
				<div id="msgMakerSpace">
					<div id="msgMaker">
						
						<div id="msgSpace">
							<span>Message:</span>
							<div id="msgInput">
								<div id="msgWarning"></div>
							</div>
						</div>

						<div id="groupSpace">
							<span>Group:</span>
							<div id="groupInput">
								<div id="grpWarning"></div>
							</div>
						</div>

						<div id="sendButton">
							Send!
							<i class="fa fa-spinner fa-spin"></i>
						</div>
					</div>
				</div>

				<div id="recentMsgs">
					<div id="recentTitle">Recent Messages</div>
					<div class="scrolls" >
					
					</div>
					<div class="spinnerWrap">
							<div class="spinner">
								<div class="rect1"></div>
								<div class="rect2"></div>
								<div class="rect3"></div>
								<div class="rect4"></div>
								<div class="rect5"></div>
							</div>
						</div>
				</div>

				<div id="msgOverlay">
					<div id="closeMsg">&times;</div>
					<div id="newMsg">+</div>
					<div id="msgTitle">Message List</div>

					<div id="msgOverlayWrap" ondrop="drop(event, this)" ondragover="allowDrop(event)">

					</div>
				</div>

				<div id="groupOverlay">
					<div id="closeGroup">&times;</div>
					<div id="groupTitle">Groups List</div>

					<div id="groupOverlayWrap" ondrop="drop(event, this)" ondragover="allowDrop(event)">

					</div>
				</div>

			</div>


			<!--GROUPS-->
			<div class="hidden" id="groups">
				<div id="grpTopBar">
					<div id="topTitle">Manage Groups</div>

					<div id="trashGrp">
						<img src="./images/trashBin.png">
					</div>

					<div id="addGrp">
						<img src="./images/addBtn.png">
					</div>

					<div id="reloadGrp">
						<img src="./images/reload.png">
					</div>

					<div id="searchGrp">
						<img src="./images/search.png">
					</div>

					<div id="searchBox">
						<input type="text" id="searchInput" onkeyup="grpSearch();" placeholder=" Search for groups..">
					</div>
				</div>

				<div id="addPopup">
					<div id="popupBox">
						<div id="closePopup">&times;</div>
						<div id="popupTitle">Group Name:</div>
						<input id="groupText" type="text">
						<span id="validNameWarning"></span>

						<div id="createGrp"><!-- Send off ajax request to post new SNS topic -->
							Create Group
						</div>
					</div>
				</div>

				<div id="deletePopup">
					<div id="deleteBox">
						<div id="closeDelPopup">&times;</div>
						<div id="popupDelTitle">
							Are you sure you want to delete:
							<br>
							<span id="warningMsg">Deleting a group will also delete its subscribers</span> 
						</div>
						
						<div id="tableWrap">
							<table id="selectedGroups">
								
							</table>
						</div>

						<div id="deleteGroup"><!-- Send off ajax request to post new SNS topic -->
							Delete Group(s)
						</div>
					</div>
				</div>

				<table id="grpTable">
					<thead>
					  <tr>
					  	<th>
					  		<!-- OLD CUSTOM CHECKBOX
					  		<label id="checkAll">
								  <input type="checkbox">
								  <span class="checkmark"></span>
								</label> 
								-->
					  		<div id="checkAll">
	                
	            	</div>
					  	</th>
					    <th>Group Name</th>
					    <th>Number of Members</th>
					    <th>Date Created</th>
					  </tr>
					</thead>
					<tbody>

					</tbody>
				</table>

				<div class="spinnerWrap">
					<div class="spinner">
					  <div class="rect1"></div>
					  <div class="rect2"></div>
					  <div class="rect3"></div>
					  <div class="rect4"></div>
					  <div class="rect5"></div>
					</div>
				</div>
			</div>


			<!--SUBSCRIBERS-->
			<div class="hidden" id="subscribers">
				<div id="subsTopBar">
					<div id="subsTitle">Manage Subscriptions</div>

					<div id="grpTab">
						Groups
					</div>

					<div id="subsTab">
						All Subscriptions
					</div>

					<div id="subsIconRow">
						<div id="addSub">
							<img src="./images/addBtn.png">
						</div>

						<div id="trashSub">
							<img src="./images/trashBin.png">
						</div>

						<div id="reloadSub">
							<img src="./images/reload.png">
						</div>

						<div id="searchSub">
							<img src="./images/search.png">
						</div>

						<div id="searchBoxSub">
							<input type="text" id="searchInputSub" onkeyup="subSearch();" placeholder=" Search for subs...">
						</div>

					</div>

				</div>

				<div id="addSubPop">
					<div id="addSubBox">
						<div id="closeAddSub">&times;</div>
						<div id="popSubTitle">Subscriber Information:</div>

						<div id="subName">Full Name</div>
						<input id="subText" type="text">
						<span id="addSubNameWarning"></span>

						<div id="protocolTitle">Endpoint/Protocol:</div>
						<div id="subProtocol">
							<div id="textProt">
								<div id="textCircle"></div>
								<div id="textProtText">Text</div>
							</div>

							<div id="emailProt">
								<div id="emailCircle"></div>
								<div id="emailProtText">Email</div>
							</div>
						</div>

						<br>
						<div id="contactTitle">Phone Number (With International Call Prefix):</div>
						<input id="contactInfo" type="text" placeholder="Ex. 18081234567">
						<span id="addSubWarning"></span>

						<div id="groupOptTitle">Select a Group:</div>
						<select id="groupSelect">
						</select>

						<div id="createSub">Create Subscriber</div>
					</div>
				</div>

				<div id="delSubPop">
					<div id="delSubBox">
						<div id="closeDelSub">&times;</div>
						<div id="delSubTitle">
							Are you sure you want to remove:
							<br>
							<span id="subWarningMsg">Deleting a subscriber will remove them from all groups</span>
						</div>

						<div id="selectedSubsWrap">
							<table id="selectedSubs">
								
							</table>
						</div>

						<div id="deleteSub">Delete Subscriber(s)</div>
					</div>
				</div>

				<div id="openSub">
					<table id="subsTable">
						<thead>
						  <tr>
						  	<th>
						  		<div id="checkAllSubs">
			                
			            </div>
						  	</th>
						    <th>Name</th>
						    <th>Medium</th>
						    <th>Contact</th>
						  </tr>
						</thead>
						<tbody>

						</tbody>
					</table>

					<div class="spinnerWrap">
						<div class="spinner">
						  <div class="rect1"></div>
						  <div class="rect2"></div>
						  <div class="rect3"></div>
						  <div class="rect4"></div>
						  <div class="rect5"></div>
						</div>
					</div>

				</div>

				<div id="tempSide"> <!--side div that pops out to temp store card-->
					<div id="tempTitle"><span id="delSubCard">Delete</span> | Hold</div>
					<div id="tempInp" ondrop="drop(event, this)" ondragover="allowDrop(event)">
						
					</div>
				</div>

				<div id="cloneBtn">
					Clone
				</div>



				<div id="saveSub">
					<img src="./images/save.png">
				</div>

				<div id="openGrp"> <!--groups and subscribers generated in this div (columns)-->
					

				</div>


			</div>


			<!--MESSAGES-->
			<div class="hidden" id="messages">
				<div id="msgsTopBar">
					<div id="msgsTitle">Manage Messages</div>
					
					<div id="trashMsg" style="opacity: 0.5;">
						<img src="./images/trashBin.png">
					</div>
					<div id="reloadMsg">
						<img src="./images/reload.png">
					</div>
					<div id="searchMsg">
						<img src="./images/search.png">
					</div>
					<div id="addMsg">
						<img src="./images/addBtn.png">
					</div>
				</div>

				<div id="openOldMsg">
					<div id="addMsgPopup">
						<div id="msgPopupBox">
							<div id="closeMsgPopup">&times;</div>
							<div id="msgPopupTitle">Message:</div>
							<textarea rows="10" id="typeMsg" placeholder="Type message here"></textarea>
							<div id="createMsg">
								Create Message
							</div>
						</div>
					</div>

					<div id="deleteMsgPopup">
						<div id="deleteMsgBox">
							<div id="closeMsgDelPopup">&times;</div>
							<div id="popupMsgDelTitle">
								Are you sure you want to delete:
								<br>
								<span id="delMsgWarning">You will be unable to access message(s) once deleted</span> 
							</div>
							
							<div id="msgTableWrap">
								<table id="selectedMessages">
									
								</table>
							</div>

							<div id="deleteMessage"><!-- Send off ajax request to post new SNS topic -->
								Delete Message(s)
							</div>
						</div>
					</div>

					<div id="editMsgPopup">
						<div id="editMsgBox">
							<div id="closeMsgEditPopup">&times;</div>
							<div id="popupMsgEditTitle">You are now editing:</div>
							<textarea rows="10" id="editMsgHere" placeholder="Your original message has been deleted. If unintentional, exit now."></textarea>
							<span id = "editMsgWarning"></span>
							<div id="saveMessage">Save Message</div>
						</div>
					</div>

					<div id="oldMsgContainer">
							
						<div id="msgCol"> <!-- messages are generate dynamically in this div -->
	
						</div>

						
						<div class="spinnerWrap">
							<div class="spinner">
							  <div class="rect1"></div>
							  <div class="rect2"></div>
							  <div class="rect3"></div>
							  <div class="rect4"></div>
							  <div class="rect5"></div>
							</div>
						</div>
					</div>
					
				</div>

				<div id="openNewMsg">
					<div id="newMsgContainer">
						<h2>Write Custom Message:</h2>
			 			<textarea name="generalText" rows="15" id="typeMsg" placeholder="Type message here"></textarea>
			 			<div id="submitMsg">Create</div>
					</div>
					
				</div>

			</div>


			<!--QUICK SEND-->
			<div class="hidden" id="quickSend"><!--broadcasts preset messages to EVERYONE-->
				<div id="msgTypePanel">
					<div class="tab"><h3>Type</h3></div>
					<div class="scroll">
							<div class="spinnerWrap">
						<div class="spinner">
							<div class="rect1"></div>
							<div class="rect2"></div>
							<div class="rect3"></div>
							<div class="rect4"></div>
							<div class="rect5"></div>
						</div>
					</div>
					</div>
				</div>
				<div id="msgPanel">
					<div class="tab"><h3>Message</h3></div>
					<div id="qsContainer">
						<div id= "qsType">
							<input type="text" size="25" id="editTypeBox">
							<h3 id="typeHeader">Preview</h3>	
							<img id ="edit-saveType" src="./images/edit.png" onclick="editType()">
						</div>

						<div id = "msgContainer">
							<!-- http://www.margolishealy.com/files/resources/Emergency_Message_Templates.pdf -->
							
							<textarea id="editBox" class="msgBox"></textarea>
							<p id="note">Note: Use { } to create a textbox</p>

							<div id="editButton" onclick="editMsg()">
								<img id ="edit-saveMsg" src="./images/edit.png">
							</div>
						</div>

						<div id = "qsSend" onclick="sendToAll()">
							<h3>Send!</h3>
							<i class="fa fa-spinner fa-spin"></i>
						</div>
					</div>
				</div>

			</div>

		</div>		
	</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
	<script src="./client/app.js"></script>
	<script src="./client/requests.js"></script>
</body>
</html>
